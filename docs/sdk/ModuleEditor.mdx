---
id: ModuleEditor
title: Pipeline Validation
displayed_sidebar: SDKSidebar
---

import NodeChip from '@site/src/components/NodeChip.js'


## Overview

**ganymede_sdk.editor** contains classes for mimicking pipeline environment to facilitate debugging and to validate data schemas.

### `class` MockGanymedeContext

**GanymedeContext** stores _flow_ metadata such as user ID, input filenames, input parameters, and execution timestamp upon _flow_ execution.

**MockGanymedeContext** replicates the behavior of **GanymedeContext** in Editor notebooks, enabling users to replicate the environment of prior workflow executions in a Jupyter notebook environment.  When no parameters are passed into the object, calling **MockGanymedeContext()** with no parameters retrieves metadata from the most recent execution of the corresponding _flow_.

This enables users to test user-defined Python and SQL that incorporates metadata; for example, the **MockGanymedeContext** can be used to render [Jinja template variables](../FlowMetadata.mdx#template-variables) in a _retrieve_sql_ call, or to resolve references to the GanymedeContext parameter within _execute_ functions.

```python
from ganymede_sdk.editor import MockGanymedeContext
from ganymede_sdk.io import retrieve_sql

# Create MockGanymedeContext with inputs from most recent run
mock_ganymede_context = MockGanymedeContext()

# Retrieve dataframe with run_id from most recent run
query_sql = "SELECT * FROM tbl WHERE LEFT(run_id, 26) = FORMAT_TIMESTAMP("%Y-%m-%dT%R:%E6S", TIMESTAMP_MILLIS({{run_id}}))"
result = retrieve_sql(query_sql, context=mock_ganymede_context)
```

```python
import pandas as pd
from ganymede_sdk.editor import GanymedeContext, MockGanymedeContext
from ganymede_sdk.io import retrieve_sql

query_sql = "SELECT * FROM input_table"

# User-editable Python function for node
def execute(df: pd.DataFrame, ganymede_context: GanymedeContext = None) -> pd.DataFrame:
  df['run_id'] = ganymede_context.run_id
  return df

# Use MockGanymedeContext object from most recent run in execute function
mock_ganymede_context = MockGanymedeContext()
df_input = retrieve_sql(query_sql)
df_output = execute(df_input, ganymede_context=mock_ganymede_context)
```

### `function` compare_df_to_table

*compare_df_to_table* allows users to compare the columns and schema on a Pandas DataFrame to a corresponding table in the Ganymede database.
The function returns differences in column names and data types between the DataFrame and the table, and can be used to validate that the DataFrame matches the table schema before writing the DataFrame to the table.

```python
from ganymede_sdk.editor import GanymedeContext, compare_df_to_table

# use ganymede_context param if compare_df_to_table accessed inside of execute function
mock_ganymede_context = MockGanymedeContext()

res = compare_df_to_table(mock_ganymede_context, df, 'ganymede_table_name')
```

