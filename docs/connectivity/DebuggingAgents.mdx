---
id: DebuggingAgents
title: Agent Reference & Troubleshooting
displayed_sidebar: webUiSidebar
---

## FAQ

#### Q: How do I exclude specific files from a watch folder from being uploaded for an agent that uploads files and runs flows?

A: To exclude specific files from being uploaded, you can use the `fp` function to specify which files should be included.  For example, to exclude files that contain the string "exclude" in the filename, you can use the following code:

```python
    def fp_res(x: str):
        x = parse.unquote(x)

        # files excluding temp files
        files_to_capture = [filename in glob.glob(os.path.join(watch_dir, pattern), recursive=True) if not 'exclude' in filename]

        return files_to_capture

    return fp_res
```

#### Q: How do I capture a file that is periodically overwritten by an instrument?

A: Modified files are captured by the Agent, and so would be uploaded and processed in flows when modified.  Logic can be implemented within flow or agent logic to address intended behavior, depending on whether the instrument appends to or overwrites the file.

#### Q: Can I access environment secrets from the Agent?

A: Yes, you can access environment secrets from the Agent.  To do so, you can reference the [get_secret](../api/GanymedeClass#method-get_secret) method.

#### Q: Can I access an environment variable from a cron Agent?  For example, can I access the `input_path` variable configured upon installation?

A: Yes, this can be done by referencing variables within the `kwargs` dictionary.  For example, to access the `input_path` variable, you can use the following code:

```python
# .get method for dictionries is used to handle the case where the variable may not be present without erroring out
# note: assumes DEFAULT_PATH is configured in the agent
watch_directory = Path(kwargs.get("vars", []).get("input_path", DEFAULT_PATH))
```

## Troubleshooting

#### Issue: I am unable to install the agent on Windows; the installer is failing at the final step.

Ensure that you are running the installer as an administrator.  

Then, ensure that there is not an existing installation that is conflicting with the current installation.  To do so, open up the Task Manager and navigate to the Services tab.  Look for any service that starts with "GanymedeAgent-" and stop the service by right clicking on it and selecting "Stop".  Open up "Add or Remove Programs" and uninstall any existing Ganymede Agent installations.  Then, try installing the Agent again.

#### Issue: The Agent is not actively running.  How do I check?

On Windows, check that the installed agent is running by opening up Task Manager and navigating to the Services tab.  Look for the agent of interest (will be a service with a name starting with "GanymedeAgent-") and verify that its current status is Running.  

On Linux, check that the installed agent is running by opening up a terminal and running the following command:

```bash
sudo systemctl status GanymedeAgent-<agent_name>
```

If you do not see it, ensure that the Agent is installed.

If you see that the Agent is present but is not running, right click on the service and select "Start".  This should start the Agent.  Note that, by default, Agents are configured to start upon reboot.

#### Issue: Agent is showing as disconnected after the Agent has been running for a while

On Windows, ensure that the PC that the Agent is installed on is not asleep.  In particular, PCs with cron Agents should be configured to never sleep.  To do so, open up the Control Panel and navigate to "Hardware and Sound" -> "Power Options".  Select "Change when the computer sleeps" and set "Put the computer to sleep" to "Never".

Also, ensure that the current system time is properly sync'd; if the time is not inaccurate, the Agent will show as disconnected.  To do so, right click on the time in the bottom right corner of the screen and select "Adjust date/time".  Ensure that the "Set time automatically" option is enabled, and click "Sync now".

#### Issue: The flow is failing to trigger when files are being dropped

Look at the logs for the agent in Ganymede App.  If you see the JWT error below, click on the system clock in the lower right corner of the screen and select "Adjust date/time".  Ensure that the "Set time automatically" option is enabled, and click "Sync now".

```bash
_thread.ExceptHookArgs(exc_type=<class 'google.auth.exceptions.RefreshError'>, exc_value=RefreshError('invalid_grant: Invalid JWT: Token must be a short-lived token (60 minutes) and in a reasonable timeframe. Check your iat and exp values in the JWT claim.', \{'error': 'invalid_grant', 'error_description': 'Invalid JWT: Token must be a short-lived token (60 minutes) and in a reasonable timeframe. Check your iat and exp values in the JWT claim.'\})
```

If not, verify that the watch folder is specified correctly.  This is configured upon [Agent installation](./Agent#windows-installation); note that the input path must be specified with forward slashes for both Windows and Linux installations.

For example, to watch a folder on the Desktop named "watch_folder" specify the following on installation, with \<username\> replaced with the appropriate user name:

```bash
-v "input_path=C:/Users/<username>/Desktop/watch_folder"
```

:::note Take care when copying and pasting commands
One common gotcha is that the quote character `"` somehow gets replaced with the left or right quotes (`“` or `”`) when copying and pasting commands from documents (which can be hard to spot).  Always ensure that the single quote character `"` is used. 
:::

#### Issue: All files are present in the directory watched.  In the logs within the app, files are shown as being collected in two different waiting groups, so the flow does not trigger.  How do I ensure that all files appear in the same waiting group?

A: Unquote the string referenced within the fp function, which specifies which filename patterns the Agent should watch for.  An example is shown below:

```python
def fp(watch_dir: str, parent_dir: str, pattern: str) -> Callable[[str], bool]:
    def fp_res(x: str):
        x = parse.unquote(x)
        return x in glob.glob(os.path.join(watch_dir, pattern), recursive=True)

    return fp_res
```

## Agent / Connection Logs

The table below shows log messsages that can be found in Agents / Connections.  These can be found in the UI by navigating to the relevant Connection.

* Message: message received from Agent
* Description: contextualized version of message emitted by Agent
* Section: section within Agent code generating message
* Logging Level: level of severity that log indicates
* OS: operating system that the message pertains to, if applicable
* Associated Error Type: associated Agent error type, if applicable

| Message                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Description                                                                                                                                                                                                                                                                                                                                                              | Section            | Logging Level | OS      | Associated Error Type                                                   |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------ | ------------- | ------- | ----------------------------------------------------------------------- |
| Setting new version because the config is being set from cli                                                                                                                                                                                                                                                                                                                                                                                                                                      |                                                                                                                                                                                                                                                                                                                                                                          | Config             | Info          | All     | N/A                                                                     |
| New connection version: \{agent_version\}, name: \{name\}, core version: \{version\}                                                                                                                                                                                                                                                                                                                                                                                                                    | Generate a new config for the connection when run from CLI                                                                                                                                                                                                                                                                                                               | Config             | Info          | All     | N/A                                                                     |
| New connection version: \{version\}                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Update connection version                                                                                                                                                                                                                                                                                                                                                | Config             | Info          | All     | N/A                                                                     |
| Loading Agent config to Connection. Agent version: \{agent_version\}, Agent codebase version: \{agent_codebase_version\}                                                                                                                                                                                                                                                                                                                                                                              | Loading yaml config from Agent to Connection                                                                                                                                                                                                                                                                                                                             | Config             | Info          | All     | N/A                                                                     |
| Attempting to read config from cli but the file has not been created. Expected location: \{path to config\}                                                                                                                                                                                                                                                                                                                                                                                         |                                                                                                                                                                                                                                                                                                                                                                          | Config             | Error         | All     | Exception                                                               |
| Calling \{method name\} with args=\{args\}, kwargs=\{kwargs\} from \{caller method name\} in thread \{thread name\} with native ID: \{thread native ID\}                                                                                                                                                                                                                                                                                                                                                      | Log message upon entering method. Thread native ID is the thread ID assigned by the system kernel.                                                                                                                                                                                                                                                                       | Connection         | Info          | All     | N/A                                                                     |
| Exited call to method \{method name\} with args=\{args\}, kwargs=\{kwargs\} in thread \{thread name\} with native ID: \{thread native ID\}.                                                                                                                                                                                                                                                                                                                                                                 | Log message upon exiting method.                                                                                                                                                                                                                                                                                                                                         | Connection         | Info          | All     | N/A                                                                     |
| Exception in \{method name\} with args=\{args\}, kwargs=\{kwargs\} in thread \{thread name\} with native ID: \{native ID\}: \{e\}\nID: \{thread ID\}, Alive: \{thread is alive\}, Daemon: \{thread is daemon\}, Active Count: \{number of active threads\},\nParent Name: \{parent thread name\}, Parent Thread ID: \{parent thread ID\}, Parent Thread Native ID: \{parent thread native ID\},\nCalled by: \{caller method name\},\nRuntime state: \{Connection runtime state\}, Environment: \{Connection environment\} |                                                                                                                                                                                                                                                                                                                                                                          | Connection         | Error         | All     | Exception                                                               |
| Connection successfully initialized                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Signal handler initialized, logger initialized, and, if agent is a Virtualization Agent, Agent has app ID.                                                                                                                                                                                                                                                               | Connection         | Info          | All     | N/A                                                                     |
| Virtualization Agent requires the app_id to be set. Only found these vars \{variables\} for connection \{id\} of agent \{agent id\}                                                                                                                                                                                                                                                                                                                                                                     | Connection marked as a virtualization Connection, but does not have an app_id for virtualization.                                                                                                                                                                                                                                                                        | Connection         | Error         | All     | TypeError                                                               |
| Skipping status ping \{id\} with \{runtime_state\}                                                                                                                                                                                                                                                                                                                                                                                                                                                    | Connection did not start successfully. Agent is entering shutdown state, so will not start status ping thread.                                                                                                                                                                                                                                                           | Connection         | Info          | All     | N/A                                                                     |
| Skipping status ping health check \{id\} with \{runtime state\}                                                                                                                                                                                                                                                                                                                                                                                                                                       | Connection did not start successfully. Agent is entering shutdown state, so will not start status ping health check thread.                                                                                                                                                                                                                                              | Connection         | Info          | All     | N/A                                                                     |
| Unable to send log to API Server. Log: \{log\}                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Cannot send log to Ganymede Cloud.                                                                                                                                                                                                                                                                                                                                       | Connection         | Error         | All     | Exception                                                               |
| Unable to ping API Server at \{api_url.geturl()\}                                                                                                                                                                                                                                                                                                                                                                                                                                                   |                                                                                                                                                                                                                                                                                                                                                                          | Connection         | Error         | All     | N/A                                                                     |
| Unable to ping Pub/Server API Server                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Unable to ping Pub/Server for Ganymede Cloud.                                                                                                                                                                                                                                                                                                                            | Connection         | Error         | All     | N/A                                                                     |
| Unable to ping GCS API Server                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                                                                                                                                                                                                                                                                                                                          | Connection         | Error         | All     | N/A                                                                     |
| Stopping and disabling connection service. It will not resume without user intervention. Exe: \{exe location\}. Reason: Health checks did not pass, agent functionality limited. Connection service must shut down until this is resolved.                                                                                                                                                                                                                                                          | Startup health check did not run successfully. The health check is described on https://docs.ganymede.bio/configuration/AgentNetworkConfig#testing-connectivity. Stopping and disabling service.                                                                                                                                                                         | Connection         | Info          | All     | Exception                                                               |
| Stopping and disabling connection service. It will not resume without user intervention. Exe: \{exe location\}. Reason: Agent cannot be found in api-server. Connection service must shut down.                                                                                                                                                                                                                                                                                                     | Either unable to register connection or share that connection state is live. Had an ApiException in internal Agent API communication with 404 status code.                                                                                                                                                                                                               | Connection         | Error         | All     | openapi_client.ApiException with 404 status code                        |
| Unable to register connection.                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | Either unable to register connection or share that connection state is live. Did not have an ApiException in internal Agent API communication with 404 status code.                                                                                                                                                                                                      | Connection         | Error         | All     | Exception (other than openapi_client.ApiException with 404 status code) |
| Shutdown being complete in another thread. Skipping.                                                                                                                                                                                                                                                                                                                                                                                                                                              | Attempted to start shutdown, but observed that shutdown is being completed in another thread, so will not continue shutdown in current thread.                                                                                                                                                                                                                           | Connection         | Debug         | All     | N/A                                                                     |
| Unable to set state to shutdown in api server: \{error\}                                                                                                                                                                                                                                                                                                                                                                                                                                            | Failure to set connection state to SHUTDOWN_COMPLETE after state had been set to SHUTDOWN_STARTED                                                                                                                                                                                                                                                                        | Connection         | Error         | All     | Exception                                                               |
| Connection \{id\} has complete shutdown_connection                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Connection state has been set to SHUTDOWN_COMPLETE                                                                                                                                                                                                                                                                                                                       | Connection         | Info          | All     | N/A                                                                     |
| Continuing to loop here. Restarting count. liveness_ping is still running                                                                                                                                                                                                                                                                                                                                                                                                                         | Liveness ping has cycled through another 100 calls (conducted every 30s by default)                                                                                                                                                                                                                                                                                      | Connection         | Info          | All     | N/A                                                                     |
| Status ping health check is not running. Starting it again.                                                                                                                                                                                                                                                                                                                                                                                                                                       | Either ping health check is not running or ping heal check thread is not alive                                                                                                                                                                                                                                                                                           | Connection         | Info          | All     | N/A                                                                     |
| Stopping and uninstalling connection service. It will not resume without user intervention. Reason: Starting full update. Removing and yielding to running upgrade.                                                                                                                                                                                                                                                                                                                               | Stopping existing Connection to perform full update                                                                                                                                                                                                                                                                                                                      | Connection         | Info          | All     | N/A                                                                     |
| Stopping and disabling connection service. It will not resume without user intervention. Exe: \{exe location\}. Reason: API Server requested shutdown                                                                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                                          | Connection         | Error         | All     | N/A                                                                     |
| Starting agent full update to agent version \{agent version\}                                                                                                                                                                                                                                                                                                                                                                                                                                       | Full update has been requested, and will be spawned in new thread to preserve nominal behavior.                                                                                                                                                                                                                                                                          | Connection         | Info          | All     | N/A                                                                     |
| Full update process dispatched. Moving to next ping cycle while new agent version loads.                                                                                                                                                                                                                                                                                                                                                                                                          | Full agent update process started on a new thread. This process involves attempting to set connection runtime state to FULL_UPDATE, getting a verified asset, writing the config to the connection file, and starting the service with the new agent version. When complete, a message will be logged indicating that full agent update has been completed successfully. | Connection         | Info          | All     | N/A                                                                     |
| Starting agent runtime update to version \{agent version\}                                                                                                                                                                                                                                                                                                                                                                                                                                          | Runtime update process started. This updates the connection runtime if configuration to update to is valid, Agent is set to auto update, and update would be non-breaking.                                                                                                                                                                                               | Connection         | Info          | All     | N/A                                                                     |
| No need to update. Already in progress \{runtime state\}                                                                                                                                                                                                                                                                                                                                                                                                                                            | Either runtime update or full update already in progress                                                                                                                                                                                                                                                                                                                 | Connection         | Info          | All     | N/A                                                                     |
| Error verifying the state                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | Unable to verify state of ConnectionUpdate                                                                                                                                                                                                                                                                                                                               | Connection         | Error         | All     | N/A                                                                     |
| An update is available but is considered a breaking change                                                                                                                                                                                                                                                                                                                                                                                                                                        | A runtime update was attempted, but would be a breaking change and therefore not executed.                                                                                                                                                                                                                                                                               | Connection         | Debug         | All     | N/A                                                                     |
| Invalid state to complete full update.                                                                                                                                                                                                                                                                                                                                                                                                                                                            | No state received for updating agent during full update, so set connection runtime state to EXECUTING to allow the prior connection to continue operating.                                                                                                                                                                                                               | Connection         | Error         | All     | N/A                                                                     |
| Starting full agent update process. Current Core Version \{agent codebase version\} and Agent Version \{agent version\}. Upgrading to Agent version \{new Agent state\}                                                                                                                                                                                                                                                                                                                                 | Connection runtime state has been set to FULL UPDATE.                                                                                                                                                                                                                                                                                                                    | Connection         | Info          | All     | N/A                                                                     |
| Full agent update has been completed successfully.                                                                                                                                                                                                                                                                                                                                                                                                                                                | A verified asset has been retrieved corresponding to the desired new state, a config has been written to the connection file, and the service with the new state has been started successfully.                                                                                                                                                                          | Connection         | Info          | All     | N/A                                                                     |
| Error starting service during full Agent update, rolling back full update: Error \{error\}                                                                                                                                                                                                                                                                                                                                                                                                          | Connection runtime state was set to full update, but could not execute update. An attempt to roll back the full update will now start.                                                                                                                                                                                                                                   | Connection         | Error         | All     | N/A                                                                     |
| Killing new exe \{bin location\} because of failure to conduct full update.                                                                                                                                                                                                                                                                                                                                                                                                                         | Full update rolled back; service stopped and shut down.                                                                                                                                                                                                                                                                                                                  | Connection         | Info          | All     | N/A                                                                     |
| Service killed. Need to delete bin \{bin location\}                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Service stopped and shut down; attempting to remove agent binary from local machine.                                                                                                                                                                                                                                                                                     | Connection         | Info          | All     | N/A                                                                     |
| Binary \{bin_location\} should now be deleted.                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Binary should be deleted in the course of rolling back full update. Connection state will be set back to LIVE and runtime state to EXECUTING.                                                                                                                                                                                                                            | Connection         | Info          | All     | N/A                                                                     |
| Stopping and disabling connection service. It will not resume without user intervention. Exe: \{exe_location\}. Reason: Full update was not able to be successfully rolled back. Connection service must shut down to avoid entering an unknown state.                                                                                                                                                                                                                                              | Full update rollback was not successful. Service will now be shut down and disabled.                                                                                                                                                                                                                                                                                     | Connection         | Error         | All     | N/A                                                                     |
| Running cleanup for service name \{service_name_to_uninstall\}                                                                                                                                                                                                                                                                                                                                                                                                                                      | Starting existing connection uninstall for full update.                                                                                                                                                                                                                                                                                                                  | Connection         | Info          | All     | N/A                                                                     |
| Stopping and uninstalling connection service. It will not resume without user intervention. Reason: Starting full update. Removing and yielding to running upgrade.                                                                                                                                                                                                                                                                                                                               | Starting existing connection uninstall for full update.                                                                                                                                                                                                                                                                                                                  | Connection         | Info          | All     | N/A                                                                     |
| The exe \{old exe location\} could not be stopped because of \{error\}.                                                                                                                                                                                                                                                                                                                                                                                                                               | Uninstall of existing connection for full update unsuccessful.                                                                                                                                                                                                                                                                                                           | Connection         | Error         | All     | N/A                                                                     |
| The entity \{full_path\} was not recognized as a file or directory. Did not remove.                                                                                                                                                                                                                                                                                                                                                                                                                 | Could not uninstall existing connection because path to old exe location is not valid.                                                                                                                                                                                                                                                                                   | Connection         | Error         | All     | N/A                                                                     |
| The entity \{full_path\} could not be removed because of \{error\}.                                                                                                                                                                                                                                                                                                                                                                                                                                   | Could not uninstall existing connection because path to old exe location is not valid.                                                                                                                                                                                                                                                                                   | Connection         | Error         | All     | N/A                                                                     |
| Unable to import new processor successfully because Agent spec or spec loader is None. Skipping reload to try again on next update.                                                                                                                                                                                                                                                                                                                                                               | Unable to import agent spec from file location.                                                                                                                                                                                                                                                                                                                          | Connection         | Error         | All     | N/A                                                                     |
| Unable to import new processor module from Agent spec. Skipping reload to try again on next update.                                                                                                                                                                                                                                                                                                                                                                                               | Unable to import processor module from Agent spec.                                                                                                                                                                                                                                                                                                                       | Connection         | Error         | All     | N/A                                                                     |
| Writing the new config files is complete. Reloading config.                                                                                                                                                                                                                                                                                                                                                                                                                                       | Updated processor module has been loaded. Will now reload config.                                                                                                                                                                                                                                                                                                        | Connection         | Info          | All     | N/A                                                                     |
| Reloading new config into connection complete \{self.to_dict()\}                                                                                                                                                                                                                                                                                                                                                                                                                                    | Reloaded config, updated agent version, and set connection runtime state to RUNTIME_UPDATE.                                                                                                                                                                                                                                                                              | Connection         | Info          | All     | N/A                                                                     |
| Continuing to loop here. Restarting count. Sleep is still going with length of \{length\} expected. Should have escaped at \{length\*10\}                                                                                                                                                                                                                                                                                                                                                             | Sleep for (by default) 10 minutes.                                                                                                                                                                                                                                                                                                                                       | Connection         | Info          | All     | N/A                                                                     |
| Escaping a sleep function because of a request to shutdown.                                                                                                                                                                                                                                                                                                                                                                                                                                       | Exiting sleep function because Connection is shut down                                                                                                                                                                                                                                                                                                                   | Connection         | Info          | All     | N/A                                                                     |
| Starting new connection \{id\} with labels \{labels\} and vars \{variables\}                                                                                                                                                                                                                                                                                                                                                                                                                            | Registering connection                                                                                                                                                                                                                                                                                                                                                   | Connection         | Info          | All     | N/A                                                                     |
| Starting status ping \{id\} with \{runtime_state\}                                                                                                                                                                                                                                                                                                                                                                                                                                                    | Starting status ping                                                                                                                                                                                                                                                                                                                                                     | Connection         | Info          | All     | N/A                                                                     |
| Full connection before trigger: \{connection info\}                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Connection info before starting main loop.                                                                                                                                                                                                                                                                                                                               | Connection         | Info          | All     | N/A                                                                     |
| Connection running version \{version\} with id: \{id\} running agent version \{agent_version\} on core version \{agent_codebase_version\}                                                                                                                                                                                                                                                                                                                                                                 | Setting runtime state to EXECUTING and executing trigger instance.                                                                                                                                                                                                                                                                                                       | Connection         | Info          | All     | N/A                                                                     |
| Error at top level of pipeline execution. Should continue to next loop to resume operations. Error: \{error\}                                                                                                                                                                                                                                                                                                                                                                                       | Exception occurred during execution of trigger instance.                                                                                                                                                                                                                                                                                                                 | Connection         | Error         | All     | N/A                                                                     |
| The connection files were updated. Going to prepare those to be imported next loop.                                                                                                                                                                                                                                                                                                                                                                                                               | No exception received during trigger instance execution, and connection runtime state has been set to RUNTIME_UPDATE. As a result, the updated connection files will be imported in the next loop.                                                                                                                                                                       | Connection         | Info          | All     | N/A                                                                     |
| Pipeline loop has iterated without update or exception.                                                                                                                                                                                                                                                                                                                                                                                                                                           | No exception received during trigger instance execution, and connection runtime state has not been set to RUNTIME_UPDATE.                                                                                                                                                                                                                                                | Connection         | Info          | All     | N/A                                                                     |
| Pipeline loop has exited. Shutdown process will proceed.                                                                                                                                                                                                                                                                                                                                                                                                                                          | Shutdown did not succeed. Forcing exit.                                                                                                                                                                                                                                                                                                                                  | Connection         | Info          | All     | N/A                                                                     |
| Connection has been shut down despite runtime state not being SHUTDOWN_COMPLETE. Please reach out to Ganymede support for assistance: support@ganymede.bio                                                                                                                                                                                                                                                                                                                                        | Pipeline loop has exited, despite runtime state not being SHUTDOWN_COMPLETE.                                                                                                                                                                                                                                                                                             | Connection         | Error         | All     | N/A                                                                     |
| Shutdown did not succeed in allotted time. Forcing exit.                                                                                                                                                                                                                                                                                                                                                                                                                                          | Shutdown did not succeed cleanly within 15 seconds; exiting Connection process with a System exit.                                                                                                                                                                                                                                                                       | Connection         | Error         | All     | N/A                                                                     |
| Stdout log is empty. No need to upload.                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Log is not being uploaded to Ganymede Cloud because it is empty.                                                                                                                                                                                                                                                                                                         | Connection         | Debug         | All     | N/A                                                                     |
| About to upload log \{upload_name=\}                                                                                                                                                                                                                                                                                                                                                                                                                                                                |                                                                                                                                                                                                                                                                                                                                                                          | Connection         | Info          | All     | N/A                                                                     |
| Successfully uploaded log \{upload_name=\}                                                                                                                                                                                                                                                                                                                                                                                                                                                          |                                                                                                                                                                                                                                                                                                                                                                          | Connection         | Info          | All     | N/A                                                                     |
| Unable to write log file \{file_name\} to cloud as \{upload_name\}. Expected runtime will continue. Error \{error\}                                                                                                                                                                                                                                                                                                                                                                                     | Unable to upload log to Ganymede Cloud.                                                                                                                                                                                                                                                                                                                                  | Connection         | Error         | All     | N/A                                                                     |
| Testing communication to \{hostname\}                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Testing network connectivity to ensure Connection functionality.                                                                                                                                                                                                                                                                                                         | Connection         | Info          | All     | N/A                                                                     |
| Failed to reach \{hostname\} because \{status code\}                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Unable to reach \{hostname\}; received \{status code\} during communication.                                                                                                                                                                                                                                                                                                 | Connection         | Info          | All     | N/A                                                                     |
| Failed to reach \{hostname\} because \{error\}                                                                                                                                                                                                                                                                                                                                                                                                                                                        | Unable to reach \{hostname\}; due to \{error\}.                                                                                                                                                                                                                                                                                                                              | Connection         | Info          | All     | N/A                                                                     |
| Testing communication to \{hostname\} has concluded                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Successfully reached external endpoint \{hostname\}.                                                                                                                                                                                                                                                                                                                       | Connection         | Info          | All     | N/A                                                                     |
| Executing pipeline for (\{Windows service name\}) with display name \{Windows service display name\}. \{agent codebase version\}, \{agent version\}                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                                                                                                                                                          | Connection         | Info          | Windows | N/A                                                                     |
| Shutdown being complete in another thread. Skipping.                                                                                                                                                                                                                                                                                                                                                                                                                                              | Attempt to shut down connection, but Connection runtime state is already marked as SHUTDOWN_COMPLETE in current thread, so will not attempt to shut down connection again.                                                                                                                                                                                               | Connection         | Info          | Windows | N/A                                                                     |
| Request to shutdown received by signal handler. Stopping                                                                                                                                                                                                                                                                                                                                                                                                                                          | Connection runtime state marked as SHUTDOWN_STARTED                                                                                                                                                                                                                                                                                                                      | Connection         | Info          | Windows | N/A                                                                     |
| Process closed by operating system.                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Ctrl+C, Ctrl+Break, or Ctrl+Close event detected                                                                                                                                                                                                                                                                                                                         | Connection         | Info          | Windows | N/A                                                                     |
| Received a non-shutdown signal. Will not shutdown; ID: \{reason\} - Message \{signal_msg\}                                                                                                                                                                                                                                                                                                                                                                                                            | Ctrl+Logoff event detected                                                                                                                                                                                                                                                                                                                                               | Connection         | Info          | Windows | N/A                                                                     |
| Computer has shut down.                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Ctrl+Shutdown event detected                                                                                                                                                                                                                                                                                                                                             | Connection         | Info          | Windows | N/A                                                                     |
| Received a non-shutdown signal. Will not shutdown but \{reason\} is the signal ID, \{signal_msg\} is python's attempt to interpret the signal ID                                                                                                                                                                                                                                                                                                                                                      | Received a Windows event which is not a shutdown signal, so will not shut down.                                                                                                                                                                                                                                                                                          | Connection         | Info          | Windows | N/A                                                                     |
| Request to shutdown received, stopping Connection. signal: \{reason\} - Message \{signal_msg\}                                                                                                                                                                                                                                                                                                                                                                                                        | Shutting down Connection                                                                                                                                                                                                                                                                                                                                                 | Connection         | Info          | Windows | N/A                                                                     |
| Going to create event subscription using query \{self.filter_query\}.                                                                                                                                                                                                                                                                                                                                                                                                                               | Creating subscription for Windows Event Service                                                                                                                                                                                                                                                                                                                          | Connection         | Info          | Windows | N/A                                                                     |
| Going to load init event files using query \{self.filter_query\}.                                                                                                                                                                                                                                                                                                                                                                                                                                   | Loading initial event files for Windows Event Service                                                                                                                                                                                                                                                                                                                    | Connection         | Info          | Windows | N/A                                                                     |
| Unable to load init event logs for query \{self.filter_query\}. This error will not block execution of main pipeline. Error: \{error\}                                                                                                                                                                                                                                                                                                                                                                | Unable to upload initial event logs for Windows Event Service to Ganymede Cloud.                                                                                                                                                                                                                                                                                         | Connection         | Error         | Windows | N/A                                                                     |
| No Windows events were found. Skipping upload                                                                                                                                                                                                                                                                                                                                                                                                                                                     | No windows events were detected, so skipping upload of Windows Events to Ganymede Cloud.                                                                                                                                                                                                                                                                                 | Connection         | Debug         | Windows | N/A                                                                     |
| Found a new windows event to log. Formatting.                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                                                                                                                                                                                                                                                                                                                          | Connection         | Debug         | Windows | N/A                                                                     |
| Found a new windows event to log: \{str(new_evt)\}                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Found a new event and successfully formatted event for logging                                                                                                                                                                                                                                                                                                           | Connection         | Debug         | Windows | N/A                                                                     |
| Unable to render log as-is. Event handle: \{event handle\}. Error: \{error\}                                                                                                                                                                                                                                                                                                                                                                                                                          | Could not render Windows Event for logging.                                                                                                                                                                                                                                                                                                                              | Connection         | Error         | Windows | N/A                                                                     |
| Successfully queried \{query_handle\}                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Successfully queried for Windows event logs                                                                                                                                                                                                                                                                                                                              | Connection         | Info          | Windows | N/A                                                                     |
| Running as script                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Running Windows connection as a script                                                                                                                                                                                                                                                                                                                                   | Connection         | Info          | Windows | N/A                                                                     |
| Executing pipeline for (\{Windows service name\}) with display name \{Windows service display name\}. \{agent codebase version\}, \{agent version\}                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                                                                                                                                                          | Connection         | Info          | Windows | N/A                                                                     |
| Unable to start service.                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | Unable to execute pipeline for Windows service                                                                                                                                                                                                                                                                                                                           | Connection         | Error         | Windows | Exception                                                               |
| Running service command: \{args\}                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Executing service command for Windows connection.                                                                                                                                                                                                                                                                                                                        | Connection         | Info          | Windows | N/A                                                                     |
| The connection has not been properly loaded. The necessary information is missing. Path \{env.get_abs_external_path(env.conn_config_fn)\}                                                                                                                                                                                                                                                                                                                                                           | Either Connection config file does not exist or the command provided to execute service is not either the install or launch service commands.                                                                                                                                                                                                                            | Connection         | Error         | Windows | Exception                                                               |
| Setting new version because the service command is install                                                                                                                                                                                                                                                                                                                                                                                                                                        | Updating Connection version because the command requested is install.                                                                                                                                                                                                                                                                                                    | Connection         | Info          | Windows | N/A                                                                     |
| Setting service to the parameter passed in for cleanup \{service_name\}                                                                                                                                                                                                                                                                                                                                                                                                                             | Setting Windows service to the parameter passed in for cleaning up service.                                                                                                                                                                                                                                                                                              | Connection         | Info          | Windows | N/A                                                                     |
| service cmd \{service_cmd\} not implemented yet                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Placeholder for handling status and diagnostics commands                                                                                                                                                                                                                                                                                                                 | Connection         | Info          | Windows | N/A                                                                     |
| Installer run is complete. Output: \{results.stdout\}, Error: \{results.stderr\}, Return Code: \{results.returncode\}                                                                                                                                                                                                                                                                                                                                                                                   | Successfully ran installer executable                                                                                                                                                                                                                                                                                                                                    | Connection         | Info          | Windows | N/A                                                                     |
| Unable to start service. Output: \{error stdout\}, Error: \{error stderr\}, Code: \{return code\}                                                                                                                                                                                                                                                                                                                                                                                                       | CalledProcessError when trying to start service using subprocess.run                                                                                                                                                                                                                                                                                                     | Connection         | Error         | Windows | subprocess.CalledProcessError                                           |
| Unable to start service.                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | Exception other than CalledProcessError when trying to start service using subprocess.run                                                                                                                                                                                                                                                                                | Connection         | Error         | Windows | Exception other than subprocess.CalledProcessError                      |
| Stopped service \{exe_location\} is complete. Output: \{result.stdout\}, Error: \{result.stderr\}, Return Code: \{result.returncode\}                                                                                                                                                                                                                                                                                                                                                                     | Able to successfully stop service for Connection                                                                                                                                                                                                                                                                                                                         | Connection         | Info          | Windows | N/A                                                                     |
| Disabled service \{exe_location\} is complete. Output: \{result.stdout\}, Error: \{result.stderr\}, Return Code: \{result.returncode\}                                                                                                                                                                                                                                                                                                                                                                    | Able to successfully disable service for Connection                                                                                                                                                                                                                                                                                                                      | Connection         | Info          | Windows | N/A                                                                     |
| Unable to destroy service. Output: \{error stdout\}, Error: \{error stderr\}, Code: \{return code\}                                                                                                                                                                                                                                                                                                                                                                                                     | Unable to destroy service (stop and disable service) when attempted when trying to do so using subprocess.run due to subprocess.CalledProcessError                                                                                                                                                                                                                       | Connection         | Error         | Windows | subprocess.CalledProcessError                                           |
| Unable to destroy service: \{reason\}                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Unable to destroy service (stop and disable service) when attempted when trying to do so using subprocess.run for an exception reason other than subprocess.CalledProcessError. The exception reason will be noted in a subsequent message.                                                                                                                              | Connection         | Error         | Windows | Exception other than subprocess.CalledProcessError                      |
| Starting the uninstall process for \{id=\} / \{version=\} / \{service_name=\} at \{exe_location=\}                                                                                                                                                                                                                                                                                                                                                                                                        | Attempt uninstall of connection (using subprocess.run)                                                                                                                                                                                                                                                                                                                   | Connection         | Info          | Windows | N/A                                                                     |
| Completed the uninstall process for \{service name\} from \{exe_location=\}. Output: \{result.stdout\}, Error: \{result.stderr\}, Return Code: \{result.returncode\}                                                                                                                                                                                                                                                                                                                                        | Uninstall complete                                                                                                                                                                                                                                                                                                                                                       | Connection         | Debug         | Windows | N/A                                                                     |
| Unable to uninstall service. Output: \{error stdout\}, Error: \{error stderr\}, Code: \{return code\}                                                                                                                                                                                                                                                                                                                                                                                                   | CalledProcessError when trying to uninstall connection using subprocess.run                                                                                                                                                                                                                                                                                              | Connection         | Error         | Windows | subprocess.CalledProcessError                                           |
| Unable to uninstall service: \{reason\}                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Unable to uninstall connection for an exception type other than subprocess.CalledProcessError. The reason is logged in a subsequent message as an exception. Connection is shut down.                                                                                                                                                                                    | Connection         | Error         | Windows | Exception                                                               |
| File exists and not using it. Appending timestamp for new location: \{upload_location\}                                                                                                                                                                                                                                                                                                                                                                                                             | File already exists in Ganymede storage, so timestampping file for upload.                                                                                                                                                                                                                                                                                               | Storage            | Info          | All     | N/A                                                                     |
| Uploading new file filename: \{param.filename\}, content type: \{param.content_type\}. \{use_existing_file=\}                                                                                                                                                                                                                                                                                                                                                                                           | Saving file to cloud                                                                                                                                                                                                                                                                                                                                                     | Storage            | Info          | All     | N/A                                                                     |
| Returning upload location because it already exists and set to reuse: \{upload_location\} \{use_existing_file=\}                                                                                                                                                                                                                                                                                                                                                                                      | Duplicate file exists in Ganymede storage; will reference existing file.                                                                                                                                                                                                                                                                                                 | Storage            | Debug         | All     | N/A                                                                     |
| Uploading new file to \{upload_location\} of size \{file_size\} in chunks. Should timeout every \{timeout\} seconds per chunk to allow larger files.                                                                                                                                                                                                                                                                                                                                                    |                                                                                                                                                                                                                                                                                                                                                                          | Storage            | Info          | All     | N/A                                                                     |
| Uploaded new file to: \{upload_location\} has completed                                                                                                                                                                                                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                                          | Storage            | Info          | All     | N/A                                                                     |
| Log file already exists, so will not upload again: \{upload_location\}                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                                                                                                                                                                                                          | Storage            | Info          | All     | N/A                                                                     |
| Unable to find the source of the executable                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                                                                                                                                                          | System Environment | Error         | All     | Exception                                                               |
| The service account path (\{path\}) for Ganymede Cloud does not exist.                                                                                                                                                                                                                                                                                                                                                                                                                              | Path to service account file does not exist.                                                                                                                                                                                                                                                                                                                             | System Environment | Error         | All     | N/A                                                                     |
| Unable to read SA because of error. Will use cache but cannot guarantee it is the latest. Error: \{error\}                                                                                                                                                                                                                                                                                                                                                                                          | Cannot obtain service account, but have cached service account info which the connection will attempt to use.                                                                                                                                                                                                                                                            | System Environment | Info          | All     | N/A                                                                     |
| Unable to read SA because of error. Will use cache but cannot guarantee it is the latest. Error: \{error\}                                                                                                                                                                                                                                                                                                                                                                                          | Cannot obtain service account, and do not have cached version to use.                                                                                                                                                                                                                                                                                                    | System Environment | Info          | All     | N/A                                                                     |
| Service account file is empty                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                                                                                                                                                                                                                                                                                                                          | System Environment | Error         | All     | Exception                                                               |
| Unable to load the service account from file. Error \{error\}                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                                                                                                                                                          | System Environment | Error         | All     | Exception                                                               |
| Failed to initialize connection                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Failed to initialize LinuxConnection object                                                                                                                                                                                                                                                                                                                              | Connection         | Error         | Linux   | N/A                                                                     |
| Shutdown being complete in another thread. Skipping                                                                                                                                                                                                                                                                                                                                                                                                                                               | Attempted to start shutdown, but observed that shutdown is being completed in another thread, so will not continue shutdown in current thread.                                                                                                                                                                                                                           | Connection         | Info          | Linux   | N/A                                                                     |
| Request to shutdown received by signal handler, stopping                                                                                                                                                                                                                                                                                                                                                                                                                                          | Connection runtime state marked as SHUTDOWN_STARTED                                                                                                                                                                                                                                                                                                                      | Connection         | Info          | Linux   | N/A                                                                     |
| Message \{signal_msg\} - Signal: \{reason\}                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Signal received by Connection                                                                                                                                                                                                                                                                                                                                            | Connection         | Info          | Linux   | N/A                                                                     |
| Starting connection service. Binary: \{bin_location\}                                                                                                                                                                                                                                                                                                                                                                                                                                               | Starting Linux Connection service                                                                                                                                                                                                                                                                                                                                        | Connection         | Info          | Linux   | N/A                                                                     |
| Killing connection service. Binary: \{bin_location\}                                                                                                                                                                                                                                                                                                                                                                                                                                                | Stopping and shutting down Linux Connection service                                                                                                                                                                                                                                                                                                                      | Connection         | Info          | Linux   | N/A                                                                     |

## Agent States

| **Connection Runtime State** | **Description**                                                                                                                                        |
| ------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------- |
| INITIALIZING             | Connection has not completed its registration to API Server.                                                                                       |
| EXECUTING                | Agent has registered Connection, and shared that the state of the Connection is LIVE.                                                              |
| RUNTIME_UPDATE           | Processor from Agent is being updated. The processor is the code that executes the user-defined code.                                              |
| FULL_UPDATE              | A full update of the Connection is being performed; the prior Agent executable is being uninstalled and a new Agent executable is being installed. |
| SHUTDOWN_STARTED         | Connection shutdown started (Connection has shared that it's state is SHUTDOWN with API server)                                                    |
| SHUTDOWN_COMPLETE        | Connection shutdown is complete                                                                                                                    |

| **Connection State** | **Description**                                                            |
| ---------------- | ------------------------------------------------------------------------------ |
| LIVE             | Connection is active.                                                          |
| SHUTDOWN         | Connection stopped and shut down. Will require manual intervention to restart. |
| UPDATING         | Connection is in the middle of an update.                                      |